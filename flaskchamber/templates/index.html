{% extends "bootstrap/base.html" %}
{% block title %}This is an example page{% endblock %}

{% block navbar %}
<div class="navbar navbar-fixed-top">
  <!-- ... -->
</div>
{% endblock %}

{% block content %}
  <h1>Hello, Bootstrap</h1>
<form id="theform">
{% for echo in data %}
  <div id="id_{{ loop.index0 }}">
    <div><label for="id_offset_{{ loop.index0 }}">Offset</label><input type="range" class="form-control-range" onchange="slide(event)" id="id_offset_{{ loop.index0 }}" min="-24" max="24" step="1"  value="{{ echo[0] }}"></div>
    <div><label for="id_velfact_{{ loop.index0 }}">Vel. F</label><input type="range" class="form-control-range" onchange="slide(event)" id="id_velfact_{{ loop.index0 }}" min="0" max="1" step="0.05" value="{{ echo[1] }}"></div>
    <div><label for="id_delay_{{ loop.index0 }}">Delay.</label><input type="range" class="form-control-range" onchange="slide(event)" id="id_delay_{{ loop.index0 }}" min="0" max="2" step="0.05"  value="{{ echo[2] }}"></div>
    <input type="button" class="btn btn-sm btn-danger" onclick="del(event)" id="id_delete_{{ loop.index0 }}" value="x">
  </div>
{% endfor %}
    <input type="button" class="btn btn-sm btn-info" onclick="add(event)" id="id_add">
</form>
{% endblock %}

{% block scripts %}
<script src="{{url_for('static', filename='socketio.js')}}" crossorigin="anonymous"></script>
<script type="text/javascript" charset="utf-8">
var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port);
socket.on('connect', function() {
    socket.emit('hello', {data: 'I\'m connected!'});
});
</script>
{{super()}}
<script>
function myFunction() {
    socket.emit('update', {data: "dickheads!"})
}

function slide(event) {
    socket.emit('update', { data: event.srcElement.id })
}

function del(event) {
    socket.emit('delete', {data: event.srcElement.id })
    document.location = document.location
}

function add(event) {
    socket.emit('add', { })
    document.location = document.location
}

</script>
{% endblock %}
